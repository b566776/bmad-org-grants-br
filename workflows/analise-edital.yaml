version: "1.0"
name: "analise-edital"
description: >
  Workflow para analisar edital, gerar resumo técnico, checklist de requisitos
  e sugestões iniciais de linhas de projeto para a Organização.
  Inclui micro-checkpoints de resiliência:
  - Filtro de inelegibilidade (red flags / desclassificação imediata)
  - Análise de “sentimento” do edital (palavras-chave e semântica valorizada)

inputs:
  arquivo_pdf_edital:
    description: "Caminho do arquivo PDF do edital (local ou já processado)."
    required: false
  arquivo_memoria_edital:
    description: "Arquivo de memória do edital em .bmad-custom/memories/editais/<nome>.md."
    required: true
  url_formulario_opcional:
    description: "URL do formulário de submissão online (opcional, para extração de perguntas)."
    required: false

tasks:
  - id: carregar-contexto
    description: "Carregar conteúdo do edital e memória associada."
    input:
      pdf: "{{ inputs.arquivo_pdf_edital }}"
      memoria: "{{ inputs.arquivo_memoria_edital }}"

  - id: gerar-resumo
    description: "Gerar resumo técnico do edital."
    input:
      memoria: "{{ tasks.carregar-contexto.output }}"

  - id: gerar-checklist
    description: "Gerar checklist de requisitos e documentos obrigatórios."
    input:
      resumo: "{{ tasks.gerar-resumo.output }}"

  - id: filtro-inelegibilidade
    description: >
      Micro-checkpoint: detectar “red flags” de inelegibilidade que desqualificariam a Organização imediatamente.
      Produza um parecer GO/NO-GO com evidências e itens faltantes para confirmar elegibilidade.
    input:
      contexto: "{{ tasks.carregar-contexto.output }}"
      resumo: "{{ tasks.gerar-resumo.output }}"
      checklist: "{{ tasks.gerar-checklist.output }}"

  - id: analise-sentimento-edital
    description: >
      Micro-checkpoint: identificar a semântica valorizada pelo edital (palavras/expressões recorrentes),
      sugerindo como replicar a linguagem na Fase 3 sem “encher linguiça”.
    input:
      contexto: "{{ tasks.carregar-contexto.output }}"
      resumo: "{{ tasks.gerar-resumo.output }}"
      checklist: "{{ tasks.gerar-checklist.output }}"

  - id: capturar-questionario-submissao
    description: >
      Capturar perguntas do formulário de submissão (manual ou via browser com comando EXTRAIR QUESTIONARIO).
      Identificar cada pergunta, limite de caracteres, tipo de resposta esperada.
      Esta captura antecipada permite planejar estrategicamente as respostas nas Fases 2-4.
    input:
      edital: "{{ tasks.carregar-contexto.output }}"
      url_formulario: "{{ inputs.url_formulario_opcional }}"

outputs:
  resumo_tecnico:
    description: "Resumo técnico estruturado do edital."
  checklist_requisitos:
    description: "Checklist de requisitos e documentos obrigatórios."
  inelegibilidade_red_flags:
    description: >
      Parecer GO/NO-GO (evidências) + lista de red flags: tempo mínimo de fundação, território/UF, CNPJ/registro,
      certidões/regularidade, público-alvo restrito, natureza jurídica, contrapartidas impeditivas etc.
  palavras_chave_valorizadas:
    description: >
      Palavras/expressões com alta ênfase no edital (ex.: inovação, escala, sustentabilidade, equidade),
      com recomendação de uso na Fase 3 (frases-modelo e pontos onde inserir).
  questionario_formulario:
    description: >
      Lista de perguntas do formulário de submissão com limites de caracteres identificados.
      Permite planejamento estratégico das respostas desde a Fase 2.

